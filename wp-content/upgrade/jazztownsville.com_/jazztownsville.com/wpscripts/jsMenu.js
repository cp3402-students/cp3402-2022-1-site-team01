var parseBool=function(str){if(typeof str==='string'&&str.toLowerCase()==='true')return true;return(parseInt(str,10)>0);};function wp_button_menu_stack(){var me=this,eL;me.element=[];me.m_timer=null;me.isIE=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent);me.rollovers=[];me.extrahtml='';me.exclude='';me.m_timeoutDelay=500;var mouseEnterEvent='mouseover';var mouseLeaveEvent='mouseout';if(navigator.userAgent.match(/Tablet PC/i)){mouseEnterEvent='focusin';mouseLeaveEvent='focusout';}me.addMenu=function(buttonid,tableid,tablehtml){me.extrahtml+=tablehtml;me.rollovers.push([buttonid,tableid,{}]);};me.setCurrent=function(linkids){for(var i=0;i<linkids.length;++i){var eL=$('[id="'+linkids[i]+'"]');if(eL)eL.prop("m_currentpage",true);}};me.setRollovers=function(rolloverarray){$('#divMain').append(me.extrahtml);me.addRollovers(me.rollovers);me.addRollovers(rolloverarray);};me.addRollovers=function(rolloverarray){for(var i=0;i<rolloverarray.length;++i){var eL=$('[id="'+rolloverarray[i][0]+'"]');if(eL){var eM=null;if(rolloverarray[i][1])eM=$('[id="'+rolloverarray[i][1]+'"]');if(eM)me.getOption(eM[0],rolloverarray[i][2],'m_panel',false);if(eM&&eM.prop('m_panel'))me.initPanel(eL,eM,rolloverarray[i][2]);else
{eL.prop('m_menu',eM);if(eM)me.getOption(eM[0],rolloverarray[i][2],'m_vertical',false);me.getOption(eL[0],rolloverarray[i][2],'m_linkRect',null);me.initLink(eL);}}}};me.setMenus=function(menuids,options){for(var i=0;i<menuids.length;++i){var eM=$('[id="'+menuids[i]+'"]');me.initMenu(eM,options);}};me.initPanel=function(eL,eM,options){eL.prop('m_active',false);var opt={};me.getOption(opt,options,'m_event',0);me.getOption(opt,options,'m_fade',true);me.getOption(opt,options,'m_fadespeed',10);if(opt.m_event===0||opt.m_event===1)eL.on(mouseEnterEvent,me.showEvent(eL,eM,1,false,opt.m_fade,opt.m_fadespeed));if(opt.m_event===0)eL.on(mouseLeaveEvent,me.showEvent(eL,eM,0,false,opt.m_fade,opt.m_fadespeed));if(opt.m_event===2||opt.m_event===3)eL.on('click',me.showEvent(eL,eM,1,false,opt.m_fade,opt.m_fadespeed,opt.m_event===3));if(opt.m_event===3){$(document).on('click',me.showEvent(eL,eM,0,false,opt.m_fade,opt.m_fadespeed,true));eM.on('click',me.ignoreEvent());}if(opt.m_event===4)eL.on('click',me.showEvent(eL,eM,2,false,opt.m_fade,opt.m_fadespeed));if(opt.m_event===5)eL.on('click',me.showEvent(eL,eM,0,false,opt.m_fade,opt.m_fadespeed));if(opt.m_event===6){eL.prop('m_menu',eM);me.initMenuLink(eL,opt);}if(opt.m_event===7){eL.on('click',me.showEvent(eL,eM,2,false,opt.m_fade,opt.m_fadespeed,true));$(document).on('click',me.showEvent(eL,eM,0,false,opt.m_fade,opt.m_fadespeed));}me.getOption(eM[0],options,'m_opacity',100);};me.initLink=function(eL){eL.on(mouseEnterEvent,me.showEvent(eL,eL.prop('m_menu'),1,true,eL.prop('m_menu')?eL.prop('m_menu').prop('m_fade'):false,eL.prop('m_menu')?eL.prop('m_menu').prop('m_fadespeed'):0));eL.on(mouseLeaveEvent,me.showEvent(eL,eL.prop('m_menu'),0,true,eL.prop('m_menu')?eL.prop('m_menu').prop('m_fade'):false,eL.prop('m_menu')?eL.prop('m_menu').prop('m_fadespeed'):0));if(eL.prop('m_menu')&&(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/Tablet PC/i))){eL.off('click');eL.on('click',function(){if(eL.prop('m_visible')===true){eL.prop('m_visible',false);return true;}eL.prop('m_visible',true);return false;});}else{eL.on('click',function(){if(!eL.hasOwnProperty('m_menu')){var eParents=eL.parentsUntil('html');for(var i=0;i<eParents.length;++i){if($(eParents[i]).prop('m_panel')){eL.prop('m_menu',$(eParents[i]));break;}}}return me.showMenu(null);});}if(eL[0]&&eL[0].attachEvent)eL[0].attachEvent('onselectstart',me.selectStart);eL.prop('m_clicked',false);eL.prop('m_active',false);me.setLinkStyle(eL);};me.initMenuLink=function(eL,options){me.initLink(eL);if(eL.prop('m_menu'))me.initMenu(eL.prop('m_menu'),options);};me.initMenu=function(eM,options){me.getOption(eM[0],options,'m_opacity',100);me.getOption(eM[0],options,'m_fade',true);me.getOption(eM[0],options,'m_fadespeed',10);if(!eM.prop('m_panel')){me.getOption(eM[0],options,'m_minwidth',0);me.getOption(eM[0],options,'m_hOffset',1);me.getOption(eM[0],options,'m_hPosition',1);me.getOption(eM[0],options,'m_hAlignment',0);me.getOption(eM[0],options,'m_vOffset',1);me.getOption(eM[0],options,'m_vPosition',1);me.getOption(eM[0],options,'m_vAlignment',0);me.getOption(eM[0],options,'m_xPad',3);me.getOption(eM[0],options,'m_yPad',3);me.getOption(eM[0],options,'m_xOffset',1);me.getOption(eM[0],options,'m_yOffset',1);me.getOption(eM[0],options,'m_arrow',true);me.getOption(eM[0],options,'m_arrowopt',0);me.getOption(eM[0],options,'m_balance',true);me.getOption(eM[0],options,'m_menuStyle',{});me.getOption(eM[0],options,'m_rowStyle',{});me.getOption(eM[0],options,'m_linkNormalStyle',{});me.getOption(eM[0],options,'m_linkCurrentStyle',{});me.getOption(eM[0],options,'m_linkRolloverStyle',{});me.getOption(eM[0],options,'m_linkPopupStyle',{});me.getOption(eM[0],options,'m_linkRolloverPopupStyle',{});me.getOption(eM[0],options,'m_separatorStyle',{});me.getOption(eM[0],options,'m_separatorRowStyle',{});eM.css('position','absolute');eM.css('top','-1000px');eM.css('visibility','hidden');eM.css('z-index','200');eM.css('border-collapse','collapse');me.applyStyle(eM,eM.prop('m_menuStyle'));var eL;if(eM.prop('tagName').toLowerCase()==='table'){var rows=eM.find('tr');for(var i=0;i<rows.length;++i){var eTD=$($(rows[i]).find('td')[0]);me.applyStyle(eTD,eM.prop('m_rowStyle'));eTD.css('padding-top','0');eTD.css('padding-left','0');eTD.css('padding-bottom','0');eTD.css('padding-right','0');eL=$(eTD.find('a')[0]);if(eL[0]){eL.prop('m_parentmenu',eM);eL.css('display','block');eL.css('background-repeat','no-repeat');eL.css('backgroundPosition',(eM[0].m_hPosition===0)?'left center':'right center');eL.css('background-attachment','scroll');eL.css('minWidth',eM[0].m_minwidth+'px');me.initMenuLink(eL,options);if(eL.prop('m_menu'))eM.prop('m_hasmenu',true);me.setLinkStyle(eL);}var eSep=$(eTD.find('div')[0]);if(eSep[0]){eSep.prop('m_separator',true);eSep.prop('m_parentmenu',eM);eSep.css('height','0px');me.applyStyle(eTD,eM.prop('m_separatorRowStyle'));eTD.css('font-size','1px');me.applyStyle(eSep,eM.prop('m_separatorStyle'));me.initMenuLink(eSep,options);}}}else{var links=eM.children('a,div');for(var j=0;j<links.length;++j){eL=$(links[j]);eL.prop('m_parentmenu',eM);me.initMenuLink(eL,options);}}}eM.on(mouseEnterEvent,me.showEvent(null,eM,1,true,eM.prop('m_fade'),eM.prop('m_fadespeed')));eM.on(mouseLeaveEvent,me.showEvent(null,eM,0,true,eM.prop('m_fade'),eM.prop('m_fadespeed')));};me.getOption=function(dest,src,name,defvalue){dest[name]=(src&&src[name]!==undefined)?src[name]:defvalue;};me.fixWidth=function(eM){if(me.isIE){var rows=eM.find('tr');var x=eM.prop('offsetWidth');for(var i=0;i<rows.length;++i){var eTD=$($(rows[i]).find('td')[0]);var eL=$(eTD.find('a')[0]);if(eL)eL.css('width',Math.max(eM.prop('m_minwidth'),x-parseInt(eM.css('border-left-width'),10)-parseInt(eM.css('border-right-width'),10)-parseInt(eL.css('padding-left'),10)-parseInt(eL.css('padding-right'),10))+'px');}}};me.ignoreEvent=function(){function doignore(e){if(!e)e=window.event;e.cancelBubble=true;if(e.stopPropagation)e.stopPropagation();}return doignore;};me.showEvent=function(eL,eM,show,asmenu,fade,fadespeed,protect){function doshowpanel(e){if(protect&&!show&&eM&&me.exclude===eM&&eM.prop('m_panel')!==true){me.exclude=null;return;}if(protect&&show){if(!e)e=window.event;e.cancelBubble=true;if(e.stopPropagation)e.stopPropagation();}if(asmenu===true){clearTimeout(me.m_timer);if(show===1){if(eL)me.showMenu(eL);}else if((!eM||eM.prop('m_panel')!==true)||(eM&&eM.prop('m_panel')===true)){var dotimeout=function(){me.showMenu(null);};me.m_timer=setTimeout(dotimeout,me.m_timeoutDelay);}}else
me.showItem(eM,show,fade,fadespeed);if(protect&&show)me.exclude=eM;}return doshowpanel;};me.selectStart=function(){return false;};me.showItem=function(e,show,fade,fadespeed){var visible=(e.css('visibility')!=='hidden')&&(e.prop('m_interval')===undefined||e.prop('m_fadeopacity')<e.prop('m_opacity'));var bShow=(show===1)?true:(show===2)?!visible:false;if(fade){if(e.prop('m_interval')===undefined)e.prop('m_fadeopacity',bShow?0:e.prop('m_opacity'));e.stop(true,false);if(bShow){if(e.css('visibility')==='hidden')e.css({visibility:'visible',opacity:0.0});e.animate({opacity:e.prop('m_opacity')/100},fadespeed);}else{e.animate({opacity:0.0},fadespeed,function(){e.css('visibility','hidden');});if(e.prop('m_parentlink'))e.prop('m_parentlink').prop('m_visible',false);}}else
e.css('visibility',bShow?'visible':'hidden');};me.setOpacity=function(e,opacity){e.css('opacity',(opacity===100)?'':(opacity/100));e.css('filter',(opacity===100)?'':"progid:DXImageTransform.Microsoft.Alpha(opacity="+opacity+")");};me.applyStyle=function(e,style){for(var name in style){if(e[0]&&style.hasOwnProperty(name))e[0].style[name]=style[name];}};me.setLinkStyle=function(eL){var eM=eL.prop('m_parentmenu');if(eM&&eM.prop('tagName').toLowerCase()==='table'){if(!eL.prop('m_separator')){var l=eM.prop('m_xPad');var r=eM.prop('m_xPad');var t=eM.prop('m_yPad');var b=eM.prop('m_yPad');me.applyStyle(eL,eM.prop('m_linkNormalStyle'));if(eL.prop('m_currentpage'))me.applyStyle(eL,eM.prop('m_linkCurrentStyle'));if(eL.prop('m_active')){me.applyStyle(eL,eM.prop('m_linkRolloverStyle'));l+=eM.prop('m_xOffset');r-=eM.prop('m_xOffset');t+=eM.prop('m_yOffset');b-=eM.prop('m_yOffset');}if(eL.prop('m_menu'))me.applyStyle(eL,eL.prop('m_active')?eM.prop('m_linkRolloverPopupStyle'):eM.prop('m_linkPopupStyle'));if(eM.prop('m_arrow')&&(eM.prop('m_arrowopt')===0)||(eM.prop('m_arrowopt')===1&&eM.prop('m_hasmenu'))||(eM.prop('m_arrowopt')===2&&eL.prop('m_menu'))){if(eM.prop('m_balance')||eM.prop('m_hPosition')===0)l+=10;if(eM.prop('m_balance')||eM.prop('m_hPosition')===1)r+=10;}eL.css('padding-top',t+'px');eL.css('padding-right',r+'px');eL.css('padding-bottom',b+'px');eL.css('padding-left',l+'px');}}};me.showMenu=function(eLinkHover){var eL;var newelements=[];for(eL=eLinkHover;eL;){newelements.unshift(eL);if(!eL.prop('m_parentmenu'))break;eL=eL.prop('m_parentmenu').prop('m_parentlink');}for(var i=me.element.length-1;i>=0;--i){if((i>=newelements.length)||(me.element[i]!==newelements[i])){eL=me.element.pop();eL.prop('m_active',false);me.setLinkStyle(eL);if(!eLinkHover||(eL.prop('m_menu')&&eL.prop('m_menu').prop('m_panel')!==true)){var e=eL.prop('m_menu');if(e)me.showItem(e,0,e.prop('m_fade'),e.prop('m_fadespeed'));}}else
break;}i+=1;for(;i<newelements.length;++i){eL=newelements[i];eL.prop('m_active',true);me.setLinkStyle(eL);me.element.push(eL);if(eL.prop('m_menu')){eL.prop('m_menu').prop('m_parentlink',eL);if(!eL.prop('m_menu').prop('m_ispanel'))me.positionMenu(eL);me.showItem(eL.prop('m_menu'),1,eL.prop('m_menu').prop('m_fade'),eL.prop('m_menu').prop('m_fadespeed'));}}};me.getLinkRect=function(eL,fixed){var rect=[0,0,0,0];if(eL.prop('m_linkRect'))rect=eL.prop('m_linkRect');else{var eM=eL.prop('m_menu');var eParent=(eL.prop('m_parentmenu')&&!eM.prop('m_vertical'))?eL.prop('m_parentmenu'):eL;var c=eL[0];while(c&&c.style.position!=='relative'){rect[1]+=c.offsetTop;c=c.offsetParent;}c=eParent[0];while(c&&c.style.position!=='relative'){rect[0]+=c.offsetLeft;c=c.offsetParent;}rect[3]=rect[1]+eL.height();rect[2]=rect[0]+eParent.width();}if(fixed&&(eL.prop('m_linkRect'))){var mainDiv=$('div')[0];return[rect[0]+mainDiv.offset().left,rect[1]+mainDiv.offset().top,rect[2]+mainDiv.offset().left,rect[3]+mainDiv.offset().top];}return rect;};me.positionMenu=function(eL){var eM=eL.prop('m_menu');var eParent=(eL.prop('m_parentmenu')&&!eM.prop('m_vertical'))?eL.prop('m_parentmenu'):eL;var top=0;var left=0;var fixed=false;var c=eL[0];while(c){if(c.className==='wpfixed'||c.style.position==='fixed')fixed=true;c=c.offsetParent;}eM.css('position',fixed?'fixed':'absolute');var rect=me.getLinkRect(eL,fixed);if(eM.prop('m_vertical')){if(eM.prop('m_vPosition')===0)top=rect[1]-eM.height()+eM.prop('m_vOffset');else
top=rect[3]+eM.prop('m_vOffset');if(eM.prop('m_vAlignment')===0)left=rect[0];else if(eM.prop('m_vAlignment')===1)left=(rect[0]+rect[2]-eM.prop('offsetWidth'))/2;else if(eM.prop('m_vAlignment')===2)left=rect[2]-eM.width();else if(eM.prop('m_vAlignment')===3){var width=Math.max(eM.width(),rect[2]-rect[0]);eM.css('width',width+'px');left=(rect[2]+rect[0]-eM.width())/2;}}else{if(eM.prop('m_hPosition')===0){var l=eM.prop('m_hOffset')?eM.prop('m_hOffset'):0;left=rect[0]-eM.width()-l;}else{var r=eM.prop('m_hOffset')?eM.prop('m_hOffset'):0;left=rect[2]+r;}if(eM.prop('m_hAlignment')===1)top=(rect[1]+rect[3]-eM.height())/2;else if(eM.prop('m_hAlignment')===2)top=rect[3]-eM.height();else
top=rect[1];}if(eM.prop('m_panel')!==true){top=Math.max(0,Math.min($(window).scrollTop()+$("body").height()-eM.height(),top));left=Math.max(0,Math.min($(window).scrollLeft()+$("body").width()-eM.width(),left));eM.css('top',top+'px');eM.css('left',left+'px');me.fixWidth(eM);}};}var wpmenustack=new wp_button_menu_stack();